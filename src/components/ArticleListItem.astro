---
import type { Article } from '@/lib/content';
import { formatDate } from '@/lib/content';

export interface Props {
  article: Article;
}

const { article } = Astro.props;
const fm = article.data;
let cover: string | undefined;
if (fm.cover_image) {
  const src = fm.cover_image.src;
  cover = src.startsWith('/src/content/articles/')
    ? src.replace('/src/content', '')
    : src;
}
const dateText = fm.published_at ? formatDate(fm.published_at) : '';
---
<article class="flex flex-row overflow-hidden transition-all duration-300 ease-in-out">
  <div class="flex flex-1 flex-col pb-4">
    <h3 class="mb-2 text-scale-2 font-bold">
      <a href={article.permalink} class="hover:underline">{fm.title}</a>
    </h3>

    <div class="mb-3 text-scale--1 text-text-body/70">
      {dateText && <time datetime={fm.published_at.toISOString()}>{dateText}</time>}
    </div>

    {fm.summary && (
      <p class="mb-4 text-scale-0 text-text-body/90 line-clamp-2">{fm.summary}</p>
    )}
  </div>
</article>
